# Segment configurations for batch processing
# Each segment defines a segment_filter and optional overrides

# =============================================================================
# SUPERSEGMENTS
# =============================================================================
# A supersegment combines multiple segments for shared model training.
# When segments share a supersegment, the model is trained on combined data
# and then optimization runs individually for each sub-segment.

[supersegments.no_premium]
# List of segment_filter values to combine for model training
segment_filters = [
    "personal_loans,_fusion_and_tj_direct-no_premium-a-b",
    "personal_loans,_fusion_and_tj_direct-no_premium-c-d",
    "personal_loans,_fusion_and_tj_direct-no_premium-e-f"
]

# =============================================================================
# SEGMENTS
# =============================================================================

[segments.no_premium_ab]
segment_filter = "personal_loans,_fusion_and_tj_direct-no_premium-a-b"
optimum_risk = 1.1
risk_step = 0.1
supersegment = "no_premium"  # Use shared model from supersegment

[segments.no_premium_ab.fixed_cutoffs]
sc_octroi_new_clus = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0]  # var0 bins
new_efx_clus = [3, 4, 5, 6, 7, 8, 9, 10, 12, 15]                          # var1 cutoffs

[segments.no_premium_cd]
segment_filter = "personal_loans,_fusion_and_tj_direct-no_premium-c-d"
optimum_risk = 1.3
risk_step = 0.1
supersegment = "no_premium"  # Use shared model from supersegment

[segments.no_premium_ef]
segment_filter = "personal_loans,_fusion_and_tj_direct-no_premium-e-f"
optimum_risk = 1.2
risk_step = 0.1
supersegment = "no_premium"  # Use shared model from supersegment

[segments.premium]
segment_filter = "personal_loans,_fusion_and_tj_direct-premium-"
optimum_risk = 0.9
risk_step = 0.1
# No supersegment = individual model training

# Add more segments as needed:
# [segments.another_segment]
# segment_filter = "your_segment_filter_value"
# optimum_risk = 1.0  # optional, defaults to config.toml value
# scenario_step = 0.1  # optional override
# supersegment = "supersegment_name"  # optional, for shared model training

# =============================================================================
# FIXED CUTOFFS EXAMPLE
# =============================================================================
# Use fixed_cutoffs to skip optimization and apply predefined cutoff values.
# This is useful for:
# - Applying validated/approved cutoffs from a previous analysis
# - Testing specific cutoff configurations
# - Regulatory/compliance scenarios with mandated cutoffs
#
# Example configuration:
# [segments.segment_with_fixed_cutoffs]
# segment_filter = "your_segment_filter_value"
# optimum_risk = 1.1  # Still used for reporting, but not for optimization
#
# # Fixed cutoffs: for each var0 bin, specify the max var1 value to accept
# # The lists must have the same length (one cutoff per bin)
# [segments.segment_with_fixed_cutoffs.fixed_cutoffs]
# sc_octroi_new_clus = [1.0, 2.0, 3.0, 4.0]  # var0 bin values
# new_efx_clus = [2, 2, 3, 4]                 # var1 cutoff for each var0 bin
# strict_validation = false  # If true, raise errors instead of warnings for:
#                            #   - Bin mismatches between config and data
#                            #   - Non-monotonic cutoffs
#                            #   - Cutoffs outside data range
# run_all_scenarios = false  # If true, generate all scenarios (pessimistic/base/optimistic)
#                            # Default: only generate base scenario with fixed cutoffs
#
# This means:
#   - For sc_octroi_new_clus bin 1.0 -> accept new_efx_clus <= 2
#   - For sc_octroi_new_clus bin 2.0 -> accept new_efx_clus <= 2
#   - For sc_octroi_new_clus bin 3.0 -> accept new_efx_clus <= 3
#   - For sc_octroi_new_clus bin 4.0 -> accept new_efx_clus <= 4
